<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Resumator</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <script type="text/javascript" src="/js/libs/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/js/libs/underscore-min.js"></script>
    <script type="text/javascript" src="/js/libs/backbone-min.js"></script>
  </head>

  <% if @user %>
  <body data-id="<%= @user.id %>">
  <% else %>
  <body>
  <% end %>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner ">
        <div class="container">
          <ul class="nav ">
            <li><a href="/">home</a></li>
            <% if current_user %>
              <li><a href="/sign_out/">sign out</a></li>
              <li><a href="/<%= @current_user.nickname %>">Hello <%= @current_user.nickname %></a></li>
            <% else %>
              <li><a href="/sign_in/">sign in</a></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>

    <%= yield %>

  </body>
  <script type="text/template" id="users_template">
    <h1>People</h1>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Nickname</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        [% _.each(users, function(user) { %]
          <tr>
            <td>[%= user.get('id') %]</td>
            <td>[%= user.get('name') %]</td>
            <td>[%= user.get('nickname') %]</td>
            <td><a class="btn" href="/[%= user.get('nickname') %]">View Profile</a></td>
          </tr>
        [% }); %]
      </tbody>
    </table>
  </script>
  <script type="text/template" id="user_template">
    <h1>[%= name %]</h1>
    <ul>
      <li>[%= id %]</li>
      <li>[%= nickname %]</li>
    </ul>
  </script>
  <script type="text/javascript" src="/js/application.js"></script>
</html> 